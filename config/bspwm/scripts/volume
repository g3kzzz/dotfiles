#!/bin/sh
# ===============================================
# üîä Volumen con imagen y dise√±o limpio
#       ‚†Ä‚†Ä‚¢Ä‚£¥‚£ø‚£∑‚£¶‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
#       ‚†Ä‚¢†‚£ø‚£ø‚¢ø‚£ø‚£ø‚£∑‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
#       ‚¢Ä‚°æ‚†ã‚†Ä‚£∞‚£ø‚£ø‚†ª‚£ø‚£∑‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
#       ‚†ò‚†Ä‚†Ä‚¢†‚£ø‚£ø‚†É‚†Ä‚†à‚†ª‚£ø‚£¶‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
#       ‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚°á‚†Ä‚†Ä‚†Ä‚£º‚£â‚£ø‚£∑‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£Ä‚£Ä‚†Ä
#       ‚†Ä‚†Ä‚†Ä‚¢π‚£ø‚°á‚†Ä‚†Ä‚†Ä‚£ø‚£ø‚£ø‚£ø‚£ø‚£∑‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£¥‚†ü‚£ø‚†â‚†Å
#       ‚†Ä‚†Ä‚†Ä‚†∏‚£ø‚£ø‚£Ñ‚†Ä‚†Ä‚†ò‚¢ø‚£ø‚°µ‚†ã‚†ô‚¢ø‚£¶‚°Ä‚†Ä‚†Ä‚£§‚£†‚†Ä‚£†‚£ø‚°Ö‚†Ä‚£ø‚†Ä‚†Ä
#       ‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ª‚¢ø‚£ø‚£∂‚£§‚£Ñ‚£Ä‚†Ä‚†Ä‚†Ä‚†à‚†ª‚£∑‚£Ñ‚£†‚£ø‚£ø‚°º‚†ã‚†õ‚£°‚°º‚†ã‚†Ä‚†Ä
#       ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†õ‚†õ‚†ª‚†ø‚†ø‚†∑‚†∂‚†∂‚†æ‚£ø‚°ø‚†ã‚†ª‚£ü‚†â‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
#       ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°†‚†∂‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
# Author: g3k
# Rep: https://github.com/IamGenarov/blackbspwm
# ===============================================

ICON_DIR="$HOME/.config/bspwm/scripts/images"
VOL_ICON="$ICON_DIR/vol.png"
MUTE_ICON="$ICON_DIR/mute.png"

# Mostrar notificaci√≥n
notify_volume() {
    local icon="$1"
    local text="$2"
    dunstify \
        -r 9999 \
        -u low \
        -t 1500 \
        -h string:x-dunst-stack-tag:volume \
        -h int:transient:1 \
        -i "$icon" "$text"
}

# Obtener y mostrar volumen
show_volume() {
    vol=$(pamixer --get-volume)
    mute=$(pamixer --get-mute)

    if [ "$mute" = "true" ] || [ "$vol" -eq 0 ]; then
        notify_volume "$MUTE_ICON" "Silenciado"
    else
        notify_volume "$VOL_ICON" "Volumen: ${vol}%"
    fi
}

# Subir/bajar volumen
adjust_volume() {
    pamixer --unmute
    pamixer --allow-boost --set-limit 150 "$@"
    show_volume
}

# Mute
toggle_mute() {
    pamixer --toggle-mute
    show_volume
}

# Ejecutar
case "$1" in
    --get)    pamixer --get-volume-human ;;
    --inc)    adjust_volume -i 5 ;;
    --dec)    adjust_volume -d 5 ;;
    --toggle) toggle_mute ;;
    *)        echo "$(pamixer --get-volume)%" ;;
esac

#!/bin/sh
# =============================================================
#       ⠀⠀⢀⣴⣿⣷⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#       ⠀⢠⣿⣿⢿⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#       ⢀⡾⠋⠀⣰⣿⣿⠻⣿⣷⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#       ⠘⠀⠀⢠⣿⣿⠃⠀⠈⠻⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#       ⠀⠀⠀⢸⣿⡇⠀⠀⠀⣼⣉⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣀⠀
#       ⠀⠀⠀⢹⣿⡇⠀⠀⠀⣿⣿⣿⣿⣿⣷⡄⠀⠀⠀⠀⠀⠀⠀⠀⢀⣴⠟⣿⠉⠁
#       ⠀⠀⠀⠸⣿⣿⣄⠀⠀⠘⢿⣿⡵⠋⠙⢿⣦⡀⠀⠀⣤⣠⠀⣠⣿⡅⠀⣿⠀⠀
#       ⠀⠀⠀⠀⠈⠻⢿⣿⣶⣤⣄⣀⠀⠀⠀⠈⠻⣷⣄⣠⣿⣿⡼⠋⠛⣡⡼⠋⠀⠀
#       ⠀⠀⠀⠀⠀⠀⠀⠀⠉⠛⠛⠻⠿⠿⠷⠶⠶⠾⣿⡿⠋⠻⣟⠉⠁⠀⠀⠀⠀⠀
#       ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡠⠶⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
# Autor: g3k
# Repo: https://github.com/IamGenarov/blackbspwm
# =============================================================


# ╭──────────────────────────────────────────────╮
# │        Escritorios y movimiento de ventanas  │
# ╰──────────────────────────────────────────────╯

# Cambiar a escritorio 1–5
super + {1-5}
    bspc desktop -f ^{1-5}

# Mover ventana al escritorio 1–5
super + shift + {1-5}
    bspc node -d ^{1-5}


# ╭──────────────────────────────────────────────╮
# │                Aplicaciones                  │
# ╰──────────────────────────────────────────────╯

# Terminal (Normal y flotante)
super + Return
    sh -c 'cd ~ && exec alacritty -e tmux'

# Editor de configuración (Rice)
super + r
    RiceEditor

# HTB VPN - Terminal flotant
super + 6
    alacritty --class FloatingTerm --title "HTB VPN" --config-file ~/.config/alacritty/alacritty.toml -e ~/.config/bspwm/scripts/HTB

# ╭──────────────────────────────────────────────╮
# │                 Capturas                     │
# ╰──────────────────────────────────────────────╯

# Captura completa (numerada real)
super + s
    sh -c 'DIR=~/Pictures/Clipboard; mkdir -p "$DIR"; n=$(ls "$DIR" 2>/dev/null | grep -Eo "^img[0-9]+\.png$" | sed "s/[^0-9]//g" | sort -n | tail -1); [ -z "$n" ] && n=0; next=$((n+1)); while [ -e "$DIR/img$next.png" ]; do next=$((next+1)); done; flameshot full -p "$DIR/img$next.png" && pkill flameshot'

# Captura con selector GUI (numerada real)
super + shift + s
    sh -c 'DIR=~/Pictures/Clipboard; mkdir -p "$DIR"; n=$(ls "$DIR" 2>/dev/null | grep -Eo "^img[0-9]+\.png$" | sed "s/[^0-9]//g" | sort -n | tail -1); [ -z "$n" ] && n=0; next=$((n+1)); while [ -e "$DIR/img$next.png" ]; do next=$((next+1)); done; flameshot gui -p "$DIR/img$next.png"'


# ╭──────────────────────────────────────────────╮
# │       Apagar, reiniciar, cerrar sesión       │
# ╰──────────────────────────────────────────────╯
ctrl + super + alt + {p,r,q,l,k,s}
    {systemctl poweroff, systemctl reboot, bspc quit, ScreenLocker, xkill, SoftReload}


# ╭──────────────────────────────────────────────╮
# │      Control de brillo y volumen             │
# ╰──────────────────────────────────────────────╯

# Brillo
XF86MonBrightness{Up,Down}
    sh Brightness {up,down}

# Volumen
XF86Audio{RaiseVolume,LowerVolume,Mute}
    Volume{ --inc, --dec, --toggle}


# ╭──────────────────────────────────────────────╮
# │                 BSPWM Core                   │
# ╰──────────────────────────────────────────────╯

# Recargar BSPWM
super + alt + r
    bspc wm -r

# Cerrar/Killear nodo
super + x
    bspc node -c


# ╭──────────────────────────────────────────────╮
# │        Navegación y gestión de nodos         │
# ╰──────────────────────────────────────────────╯

# Rotar ventana
ctrl + Tab
    bspc node @/ --rotate {90,-90}

# Cambiar de escritorio (prev/next)
super + {Left,Right}
    bspc desktop -f {prev,next}


# ╭──────────────────────────────────────────────╮
# │          Menú de aplicaciones (Rofi)         │
# ╰──────────────────────────────────────────────╯

super + d
    rofi -show drun -theme $HOME/.config/rofi/config.rasi


# ╭──────────────────────────────────────────────╮
# │     Funciones múltiples para ventanas        │
# ╰──────────────────────────────────────────────╯

# Cerrar todas las ventanas del escritorio actual
super + ctrl + x
    bspc query -N -d | xargs -I id -n 1 bspc node id -c



#!/bin/sh
# =============================================================
#       ⠀⠀⢀⣴⣿⣷⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#       ⠀⢠⣿⣿⢿⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#       ⢀⡾⠋⠀⣰⣿⣿⠻⣿⣷⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#       ⠘⠀⠀⢠⣿⣿⠃⠀⠈⠻⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#       ⠀⠀⠀⢸⣿⡇⠀⠀⠀⣼⣉⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣀⠀
#       ⠀⠀⠀⢹⣿⡇⠀⠀⠀⣿⣿⣿⣿⣿⣷⡄⠀⠀⠀⠀⠀⠀⠀⠀⢀⣴⠟⣿⠉⠁
#       ⠀⠀⠀⠸⣿⣿⣄⠀⠀⠘⢿⣿⡵⠋⠙⢿⣦⡀⠀⠀⣤⣠⠀⣠⣿⡅⠀⣿⠀⠀
#       ⠀⠀⠀⠀⠈⠻⢿⣿⣶⣤⣄⣀⠀⠀⠀⠈⠻⣷⣄⣠⣿⣿⡼⠋⠛⣡⡼⠋⠀⠀
#       ⠀⠀⠀⠀⠀⠀⠀⠀⠉⠛⠛⠻⠿⠿⠷⠶⠶⠾⣿⡿⠋⠻⣟⠉⠁⠀⠀⠀⠀⠀
#       ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡠⠶⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
# Autor: g3k
# Repo: https://github.com/g3kzzz/dotfiles
# =============================================================

# ╭──────────────────────────────────────────────╮
# │        Escritorios y movimiento de ventanas  │
# ╰──────────────────────────────────────────────╯

# Cambiar a escritorio 1–5
super + {1-5}
    bspc desktop -f ^{1-5}

# Mover ventana al escritorio 1–5
super + shift + {1-5}
    bspc node -d ^{1-5}

# ╭──────────────────────────────────────────────╮
# │                Aplicaciones                  │
# ╰──────────────────────────────────────────────╯

# Terminal (Normal y flotante)
super + Return
    sh -c 'cd ~ && exec alacritty -e tmux'

# Editor de configuración (Rice)
super + r
    RiceEditor

# HTB VPN - Terminal flotante
super + 6
    alacritty --class FloatingTerm --title "HTB VPN" --config-file ~/.config/alacritty/alacritty.toml -e ~/.config/bspwm/scripts/htb-vpn

# ╭──────────────────────────────────────────────╮
# │                 Capturas                     │
# ╰──────────────────────────────────────────────╯

# Captura completa (numerada + clipboard)
super + s
    sh -c 'DIR=~/Pictures/Clipboard; mkdir -p "$DIR"; \
    n=$(ls "$DIR" 2>/dev/null | grep -Eo "^img[0-9]+\.png$" | sed "s/[^0-9]//g" | sort -n | tail -1); \
    [ -z "$n" ] && n=0; next=$((n+1)); \
    IMG="$DIR/img$next.png"; \
    flameshot full -p "$IMG" && xclip -selection clipboard -t image/png -i "$IMG" && notify-send "📸 Captura guardada y copiada" && pkill flameshot'

# Captura con selector GUI (numerada + clipboard)
super + shift + s
    sh -c 'DIR=~/Pictures/Clipboard; mkdir -p "$DIR"; \
    n=$(ls "$DIR" 2>/dev/null | grep -Eo "^img[0-9]+\.png$" | sed "s/[^0-9]//g" | sort -n | tail -1); \
    [ -z "$n" ] && n=0; next=$((n+1)); \
    IMG="$DIR/img$next.png"; \
    flameshot gui -p "$IMG" && xclip -selection clipboard -t image/png -i "$IMG" && notify-send "📸 Captura guardada y copiada"'


# ╭──────────────────────────────────────────────╮
# │       Apagar, reiniciar, cerrar sesión       │
# ╰──────────────────────────────────────────────╯

# Apagar, reiniciar, cerrar sesión, etc.
ctrl + super + alt + {p,r,q,l,k,s}
    {systemctl poweroff, systemctl reboot, bspc quit, ScreenLocker, xkill, SoftReload}

# Música (Script)
super + 7
    ~/.config/bspwm/scripts/music

# ╭──────────────────────────────────────────────╮
# │      Control de brillo y volumen             │
# ╰──────────────────────────────────────────────╯

# Control de brillo
XF86MonBrightness{Up,Down}
    sh brightness {up,down}

# Control de volumen
XF86Audio{RaiseVolume,LowerVolume,Mute}
    volume{ --inc, --dec, --toggle}

# ╭──────────────────────────────────────────────╮
# │                 BSPWM Core                   │
# ╰──────────────────────────────────────────────╯

# Recargar BSPWM
super + alt + r
    bspc wm -r

# Cerrar/Killear nodo
super + x
    bspc node -c

# ╭──────────────────────────────────────────────╮
# │        Navegación y gestión de nodos         │
# ╰──────────────────────────────────────────────╯

# Rotar ventana
ctrl + Tab
    bspc node @/ --rotate {90,-90}

# Cambiar de escritorio (prev/next)
super + {Left,Right}
    bspc desktop -f {prev,next}

# ╭──────────────────────────────────────────────╮
# │          Menú de aplicaciones (Rofi)         │
# ╰──────────────────────────────────────────────╯

# Abrir menú de aplicaciones con Rofi
super + d
    rofi -show drun -theme $HOME/.config/rofi/config.rasi

# ╭──────────────────────────────────────────────╮
# │     Funciones múltiples para ventanas        │
# ╰──────────────────────────────────────────────╯

# Cerrar todas las ventanas del escritorio actual
super + ctrl + x
    bspc query -N -d | xargs -I id -n 1 bspc node id -c
